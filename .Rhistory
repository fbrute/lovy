"select pressure , temp , pm10 from",
"sounding1" ,
"(select date(datetime) as date , avg(pmptp) as pm10 from pm10 group by date) as pm10avg",
"where date between", period$startDate, "and", period$endDate
)
source('~/Documents/trafin/fouyol/recherche/lovy/soundings/test_medians.R')
expect_error( simulation(period), "Error in exists(period)" , fixed = TRUE)
library(testthat)
setwd ("/Users/france-norbrute/Documents/trafin/fouyol/recherche/lovy/soundings")
source("medians.R")
test_that("simulation() returns nothing ", {
period = list("2005-01-01","2015-12-31")
months = c(1,12,2)
expect_error( simulation(), "Error in exists(period)" , fixed = TRUE)
expect_error( simulation(period), "Error in exists(period)" , fixed = TRUE)
})
test_file("medians.R")
source('~/Documents/trafin/fouyol/recherche/lovy/soundings/test_medians.R')
test_file("medians.R")
source('~/Documents/trafin/fouyol/recherche/lovy/soundings/test_medians.R')
source('~/Documents/trafin/fouyol/recherche/lovy/soundings/test_medians.R')
source('~/Documents/trafin/fouyol/recherche/lovy/soundings/test_medians.R')
source('~/Documents/trafin/fouyol/recherche/lovy/soundings/test_medians.R')
source('~/Documents/trafin/fouyol/recherche/lovy/soundings/test_medians.R')
source('~/Documents/trafin/fouyol/recherche/lovy/soundings/test_medians.R')
source('~/Documents/trafin/fouyol/recherche/lovy/soundings/test_medians.R')
source('~/Documents/trafin/fouyol/recherche/lovy/soundings/test_medians.R')
paste(
"select pressure , temp , pm10 from",
"sounding1" ,
"(select date(datetime) as date , avg(pmptp) as pm10 from pm10 group by date) as pm10avg",
"where date between", period$startDate, "and", period$endDate
)
source('~/Documents/trafin/fouyol/recherche/lovy/soundings/test_medians.R')
source('~/Documents/trafin/fouyol/recherche/lovy/soundings/test_medians.R')
source('~/Documents/trafin/fouyol/recherche/lovy/soundings/test_medians.R')
source('~/Documents/trafin/fouyol/recherche/lovy/soundings/test_medians.R')
source('~/Documents/trafin/fouyol/recherche/lovy/soundings/test_medians.R')
source('~/Documents/trafin/fouyol/recherche/lovy/soundings/test_medians.R')
source('~/Documents/trafin/fouyol/recherche/lovy/soundings/test_medians.R')
source('~/Documents/trafin/fouyol/recherche/lovy/soundings/test_medians.R')
period
period = list(startDate = "'2005-01-01'", endDate = "'2015-12-31'")
paste(
"select pressure , temp , pm10 from",
"sounding1" ,
"(select date(datetime) as date , avg(pmptp) as pm10 from pm10 group by date) as pm10avg",
"where date between", period$startDate, "and", period$endDate
)
paste(
"select pressure , temp , pm10 from",
"sounding1" ,",",
"(select date(datetime) as date , avg(pmptp) as pm10 from pm10 group by date) as pm10avg",
"where date between", period$startDate, "and", period$endDate
)
paste(
"select pressure , temp , pm10 from",
"sounding1" ,",",
"(select date(datetime) as date , avg(pmptp) as pm10 from pm10 group by date) as pm10avg",
"where sounding1.date between", period$startDate, "and", period$endDate,
";"
)
paste(
"select pressure , temp , pm10 from",
"sounding1" ,",",
"(select date(datetime) as date , avg(pmptp) as pm10 from pm10 group by date) as pm10avg",
"where sounding1.date between", period$startDate, "and", period$endDate,
"and sounding1.date = pm10avg.date",
";"
)
paste(
"select date, pressure , temp , pm10 from",
"sounding1" ,",",
"(select date(datetime) as date , avg(pmptp) as pm10 from pm10 group by date) as pm10avg",
"where sounding1.date between", period$startDate, "and", period$endDate,
"and sounding1.date = pm10avg.date",
";"
)
paste(
"select sounding1.date, pressure , temp , pm10 from",
"sounding1" ,",",
"(select date(datetime) as date , avg(pmptp) as pm10 from pm10 group by date) as pm10avg",
"where sounding1.date between", period$startDate, "and", period$endDate,
"and sounding1.date = pm10avg.date",
";"
)
period = list(startDate = "'2012-06-01'", endDate = "'2012-06-02'")
paste(
"select sounding1.date, pressure , temp , pm10 from",
"sounding1" ,",",
"(select date(datetime) as date , avg(pmptp) as pm10 from pm10 group by date) as pm10avg",
"where sounding1.date between", period$startDate, "and", period$endDate,
"and sounding1.date = pm10avg.date order by date",
";"
)
paste(
"select sounding1.date, pressure , temp , pm10 from",
"sounding1" ,",",
"(select date(datetime) as date , avg(pmptp) as pm10 from pm10 group by date) as pm10avg",
"where sounding1.date between", period$startDate, "and", period$endDate,
"and sounding1.date = pm10avg.date order by date",
";"
)
z <- stats::rnorm(10000)
z
z = c(1:10, c(5,10))
z
z <- 1:100
z
cut(z, breaks = c(50,100))
cut(z, breaks = c(30,50,100))
class(cut(z, breaks = c(30,50,100)))
source('~/Documents/trafin/fouyol/recherche/lovy/soundings/medians.R')
main()
source('~/Documents/trafin/fouyol/recherche/lovy/soundings/medians.R')
main()
view(df.meanProfiles1)
View(df.meanProfiles1)
View(df.meanProfiles2)
View(df.meanProfiles3)
main()
main()
df1 = df.meanProfiles1
df2 = df.meanProfiles2
df3 = df.meanProfiles3
q
main()
save(df.meanProfiles1)
save(df.meanProfiles1,file = "df1")
save(df.meanProfiles1, file ="df1")
main()
save(df.meanProfiles1, file ="df1.RData")
save(df.meanProfiles2, file ="df2.RData")
save(df.meanProfiles3, file ="df3.RData")
load(df1)
load("df1.RData")
load("df2.RData")
load("df3.RData")
str(df1)
str(df.meanProfiles1
)
plot(df.meanProfiles1$pressure, df.meanProfiles1$temp)
g <- ggplot(df.meanProfiles1, aes (x= pressure, y=temp)) + geom_line() + scale_x_reverse()
print(g)
g <- ggplot(df.meanProfiles1, aes (x= pressure, y=temp)) + geom_line() + scale_x_reverse() +coord_flip()
print(g)
g <- ggplot(df.meanProfiles1, aes (x= pressure, y=temp)) + geom_line() + scale_x_reverse() +coord_flip() + ggplot(df.meanProfiles2, aes (x=pressure, y=temp))
g <- ggplot(df.meanProfiles1, aes (x= pressure, y=temp)) + geom_line() + scale_x_reverse() +coord_flip() + aes (x=pressure, y=temp)
paste(
"select sounding1.date, pressure , temp , pm10 from",
"sounding1" ,",",
"(select date(datetime) as date , avg(pmptp) as pm10 from pm10 group by date) as pm10avg",
"where sounding1.date between", period$startDate, "and", period$endDate,
"and sounding1.date = pm10avg.date order by date",
";"
)
source('~/Documents/trafin/fouyol/recherche/lovy/soundings/medians.R')
simulation(period)
period$startDate
missing(period$startDate)
missing(period)
simulation()
source('~/Documents/trafin/fouyol/recherche/lovy/soundings/medians.R')
simulation()
source('~/Documents/trafin/fouyol/recherche/lovy/soundings/test_medians.R')
source('~/Documents/trafin/fouyol/recherche/lovy/soundings/test_medians.R')
source('~/Documents/trafin/fouyol/recherche/lovy/soundings/test_medians.R')
source('~/Documents/trafin/fouyol/recherche/lovy/soundings/test_medians.R')
source('~/Documents/trafin/fouyol/recherche/lovy/soundings/test_medians.R')
source('~/Documents/trafin/fouyol/recherche/lovy/soundings/test_medians.R')
source('~/Documents/trafin/fouyol/recherche/lovy/soundings/test_medians.R')
source('~/Documents/trafin/fouyol/recherche/lovy/soundings/test_medians.R')
source('~/Documents/trafin/fouyol/recherche/lovy/soundings/test_medians.R')
source('~/Documents/trafin/fouyol/recherche/lovy/soundings/test_medians.R')
source('~/Documents/trafin/fouyol/recherche/lovy/soundings/test_medians.R')
source('~/Documents/trafin/fouyol/recherche/lovy/soundings/test_medians.R')
source('~/Documents/trafin/fouyol/recherche/lovy/soundings/test_medians.R')
source('~/Documents/trafin/fouyol/recherche/lovy/soundings/test_medians.R')
source('~/Documents/trafin/fouyol/recherche/lovy/soundings/test_medians.R')
length(period)
rm(period)
source('~/Documents/trafin/fouyol/recherche/lovy/soundings/test_medians.R')
source('~/Documents/trafin/fouyol/recherche/lovy/soundings/test_medians.R')
source('~/Documents/trafin/fouyol/recherche/lovy/soundings/test_medians.R')
source('~/Documents/trafin/fouyol/recherche/lovy/soundings/test_medians.R')
paste(
"select sounding1.date, pressure , temp , pm10 from",
"sounding1" ,",",
"(select date(datetime) as date , avg(pmptp) as pm10 from pm10 group by date) as pm10avg",
"where sounding1.date between", period$startDate, "and", period$endDate,
"and sounding1.date = pm10avg.date order by date"
)
period = list(startDate = "2005-01-01", endDate = "'2015-12-31'")
paste(
"select sounding1.date, pressure , temp , pm10 from",
"sounding1" ,",",
"(select date(datetime) as date , avg(pmptp) as pm10 from pm10 group by date) as pm10avg",
"where sounding1.date between", period$startDate, "and", period$endDate,
"and sounding1.date = pm10avg.date order by date"
)
paste(
"select sounding1.date, pressure , temp , mixr, relhumidity, snkt as windspeed pm10 from",
"sounding1" ,",",
"(select date(datetime) as date , avg(pmptp) as pm10 from pm10 group by date) as pm10avg",
"where sounding1.date between", period$startDate, "and", period$endDate,
"and sounding1.date = pm10avg.date order by date"
)
paste(
"select sounding1.date, pressure , temp , mixr, relhumidity, snkt as windspeed pm10 from",
"sounding1" ,",",
"(select date(datetime) as date , avg(pmptp) as pm10 from pm10 group by date) as pm10avg",
"where sounding1.date between", period$startDate, "and", period$endDate,
"and sounding1.date = pm10avg.date order by date",
";"
)
paste(
"select sounding1.date, pressure , temp , pm10 from",
"sounding1" ,",",
"(select date(datetime) as date , avg(pmptp) as pm10 from pm10 group by date) as pm10avg",
"where sounding1.date between", period$startDate, "and", period$endDate,
"and sounding1.date = pm10avg.date order by date"
)
paste(
"select sounding1.date, pressure , temp , mixr, pm10 from",
"sounding1" ,",",
"(select date(datetime) as date , avg(pmptp) as pm10 from pm10 group by date) as pm10avg",
"where sounding1.date between", period$startDate, "and", period$endDate,
"and sounding1.date = pm10avg.date order by date"
)
paste(
"select sounding1.date, pressure , temp , mixr, relhumidity pm10 from",
"sounding1" ,",",
"(select date(datetime) as date , avg(pmptp) as pm10 from pm10 group by date) as pm10avg",
"where sounding1.date between", period$startDate, "and", period$endDate,
"and sounding1.date = pm10avg.date order by date"
)
paste(
"select sounding1.date, pressure , temp , mixr, relhumidity,snkt as windspeed pm10 from",
"sounding1" ,",",
"(select date(datetime) as date , avg(pmptp) as pm10 from pm10 group by date) as pm10avg",
"where sounding1.date between", period$startDate, "and", period$endDate,
"and sounding1.date = pm10avg.date order by date;"
)
paste(
"select sounding1.date, pressure , temp , mixr, relhumidity, snkt as windspeed , pm10 from",
"sounding1" ,",",
"(select date(datetime) as date , avg(pmptp) as pm10 from pm10 group by date) as pm10avg",
"where sounding1.date between", period$startDate, "and", period$endDate,
"and sounding1.date = pm10avg.date order by date;"
)
paste(
"select sounding1.date, pressure , temp , mixr, relhumidity, snkt as windspeed , pm10 from",
"sounding1" ,",",
"(select date(datetime) as date , avg(pmptp) as pm10 from pm10 group by date) as pm10avg",
"where sounding1.date between", period$startDate, "and", period$endDate,
"and sounding1.date = pm10avg.date order by date;"
)
library(xslsx)
library(xlsx)
df.pm10_2013_14 = xlsx::read.xlsx2("~/Downloads/PM 10 2013 et 2014 traitées.xls")
df.pm10_2013_14 = xlsx::read.xlsx2(file = "~/Downloads/PM 10 2013 et 2014 traitées.xls")
df.pm10_2013_14 = xlsx::read.xlsx2(file = "~/Downloads/PM 10 2013 et 2014 traitées.xls",sheetIndex = 1)
df.pm10_2013_14 = xlsx::read.xlsx2(file = "~/Downloads/PM10_2013_2014.xlsx")
df.pm10_2013_14 = xlsx::read.xlsx2(file = "~/Downloads/PM10_2013_2014.xlsx",sheetIndex = 1)
df.pm10_2013_14 = xlsx::read.xlsx(file = "~/Downloads/PM10_2013_2014.xlsx")
pwd
getwd()
library(xlsx)
df.pm1014 = xlsx::read.xlsx("soundings/PM10_2013_2014_ymd.xlsx", sheetIndex = 1)
df.pm1014 = read.csv2(file="soundings/PM10_2013_ymd.csv")
View(df.pm1014)
v1 = 1:10
v1[:3]
v1[1:3]
df.pm1014 = df.pm1014[1:312]
df.pm10[1,1]
df.pm1014[1,1]
length(df.pm1014[1,1])
df.pm1014[1,1]
df.pm1014(1:312,)
df.pm1014[c(1:312,)]
df.pm1014[c(1:312,1:2)]
df.pm1014[1]
df.pm1014[2]
df.pm1014[1]
df.pm1014[1:2]
df.pm1014 = read.csv2(file="soundings/PM10_2013_ymd.csv")
library(RMySQL)
con = dbConnect(drv= MySQL(), user= 'dbmeteodb', password='dbmeteodb', dbname ='dbmeteodb', host='localhost' )
dbWriteTable(con, "pm102013205", df.pm1014)
df.pm1013 = read.csv2(file="soundings/PM10_2013_ymd.csv")
rm(df.pm1014)
dbWriteTable(con, "pm102013_2015", df.pm1013)
dbWriteTable(con, "pm102013_2015", df.pm1013, append= TRUE)
row.names(df.pm1013)
dbWriteTable(con, "pm102013_2015", df.pm1013, append= TRUE, row.names = FALSE)
str(df.pm1013)
as.numeric(df.pm1013$pmptp)
as.numeric(levels(df.pm1013$pmptp))[levels(df.pm1013$pmptp)]
as.numeric(paste(df.pm1013$pmptp))
as.numeric(paste(df.pm1013$datetime))
as.numeric(levels(df.pm1013$datetime))
(levels(df.pm1013$datetime))
levels(df.pm1013$datetime)
levels(df.pm1013$datetime[1])
levels(df.pm1013$datetime[[1]])
levels(df.pm1013$datetime[[1]])
df.pm1013$[1,1]
df.pm1013$[1-2]
subset(df.pm1013, select = c(levels(datetime)))
library(dplyr)
mutate(df.pm1013, datetime = levels(datetime), pm10 = paste(pmptp))
mutate(df.pm1013, datetime = levels(datetime), pmptp = paste(pmptp))
# Import pm10 data from excel files
df.pm1013 = read.csv2(file="soundings/PM10_2013_ymd.csv")
library(dplyr)
df.pm1013 = mutate(df.pm1013, datetime = levels(datetime), pmptp = paste(pmptp))
library(RMySQL)
con = dbConnect(drv= MySQL(), user= 'dbmeteodb', password='dbmeteodb', dbname ='dbmeteodb', host='localhost' )
View(df.pm1013)
str(df.pm1013)
# Import pm10 data from excel files
df.pm1013 = read.csv2(file="soundings/PM10_2013_ymd.csv")
library(dplyr)
df.pm1013 = mutate(df.pm1013, datetime = levels(datetime), pmptp = as.numeric(paste(pmptp)))
library(RMySQL)
con = dbConnect(drv= MySQL(), user= 'dbmeteodb', password='dbmeteodb', dbname ='dbmeteodb', host='localhost' )
str(df.pm1013)
# Import pm10 data from excel files
df.pm1013 = read.csv2(file="soundings/PM10_2013_ymd.csv")
library(dplyr)
df.pm1013 = mutate(df.pm1013, datetime = levels(datetime), pmptp = as.double(paste(pmptp)))
library(RMySQL)
con = dbConnect(drv= MySQL(), user= 'dbmeteodb', password='dbmeteodb', dbname ='dbmeteodb', host='localhost' )
str(df.pm1013)
# Import pm10 data from excel files
df.pm1013 = read.csv2(file="soundings/PM10_2013_ymd.csv")
library(dplyr)
df.pm1013 = mutate(df.pm1013, datetime = levels(datetime), pmptp = as.numeric(paste(pmptp), fix = 2))
library(RMySQL)
con = dbConnect(drv= MySQL(), user= 'dbmeteodb', password='dbmeteodb', dbname ='dbmeteodb', host='localhost' )
str(df.pm1013)
# Import pm10 data from excel files
df.pm1013 = read.csv2(file="soundings/PM10_2013_ymd.csv")
library(dplyr)
df.pm1013 = mutate(df.pm1013, datetime = levels(datetime), pmptp = as.numeric(paste(pmptp), fix = 3))
library(RMySQL)
con = dbConnect(drv= MySQL(), user= 'dbmeteodb', password='dbmeteodb', dbname ='dbmeteodb', host='localhost' )
str(df.pm1013)
source('~/Documents/trafin/fouyol/recherche/lovy/csv_pm10_2_mysql.R')
# Import pm10 data from excel files
df.pm1013 = read.csv2(file="soundings/PM10_2013_ymd.csv")
library(dplyr)
df.pm1013 = mutate(df.pm1013, datetime = levels(datetime), pmptp = signif(as.numeric(paste(pmptp)), digits = 2))
str(df.pm1013)
library(RMySQL)
con = dbConnect(drv= MySQL(), user= 'dbmeteodb', password='dbmeteodb', dbname ='dbmeteodb', host='localhost' )
# Import pm10 data from excel files
df.pm1013 = read.csv2(file="soundings/PM10_2013_ymd.csv")
library(dplyr)
df.pm1013 = mutate(df.pm1013, datetime = levels(datetime), pmptp = signif(as.numeric(paste(pmptp)), digits = 4))
str(df.pm1013)
library(RMySQL)
con = dbConnect(drv= MySQL(), user= 'dbmeteodb', password='dbmeteodb', dbname ='dbmeteodb', host='localhost' )
# Import pm10 data from excel files
df.pm1013 = read.csv2(file="soundings/PM10_2013_ymd.csv")
library(dplyr)
df.pm1013 = mutate(df.pm1013, datetime = levels(datetime), pmptp = signif(as.numeric(paste(pmptp)), digits = 5))
str(df.pm1013)
library(RMySQL)
con = dbConnect(drv= MySQL(), user= 'dbmeteodb', password='dbmeteodb', dbname ='dbmeteodb', host='localhost' )
# Import pm10 data from excel files
df.pm1013 = read.csv2(file="soundings/PM10_2013_ymd.csv")
library(dplyr)
df.pm1013 = mutate(df.pm1013, datetime = levels(datetime), pmptp = signif(as.numeric(paste(pmptp)), digits = 2))
View(df.pm1013)
str(df.pm1013)
library(RMySQL)
con = dbConnect(drv= MySQL(), user= 'dbmeteodb', password='dbmeteodb', dbname ='dbmeteodb', host='localhost' )
# Import pm10 data from excel files
df.pm1013 = read.csv2(file="soundings/PM10_2013_ymd.csv")
library(dplyr)
df.pm1013 = mutate(df.pm1013, datetime = levels(datetime), pmptp = signif(as.numeric(paste(pmptp)), digits = 3))
View(df.pm1013)
str(df.pm1013)
library(RMySQL)
con = dbConnect(drv= MySQL(), user= 'dbmeteodb', password='dbmeteodb', dbname ='dbmeteodb', host='localhost' )
# Import pm10 data from excel files
df.pm1013 = read.csv2(file="soundings/PM10_2013_ymd.csv")
library(dplyr)
df.pm1013 = mutate(df.pm1013, datetime = levels(datetime), pmptp = signif(as.numeric(paste(pmptp)), digits = 4))
View(df.pm1013)
str(df.pm1013)
library(RMySQL)
con = dbConnect(drv= MySQL(), user= 'dbmeteodb', password='dbmeteodb', dbname ='dbmeteodb', host='localhost' )
# Import pm10 data from excel files
df.pm1013 = read.csv2(file="soundings/PM10_2013_ymd.csv")
library(dplyr)
df.pm1013 = mutate(df.pm1013, datetime = levels(datetime), pmptp = signif(as.numeric(paste(pmptp)), digits = 3))
View(df.pm1013)
str(df.pm1013)
library(RMySQL)
con = dbConnect(drv= MySQL(), user= 'dbmeteodb', password='dbmeteodb', dbname ='dbmeteodb', host='localhost' )
# Import pm10 data from excel files
df.pm1013 = read.csv2(file="soundings/PM10_2013_ymd.csv")
library(dplyr)
df.pm1013 = mutate(df.pm1013, datetime = levels(datetime), pmptp = signif(as.numeric(paste(pmptp)), digits = 4))
library(RMySQL)
con = dbConnect(drv= MySQL(), user= 'dbmeteodb', password='dbmeteodb', dbname ='dbmeteodb', host='localhost' )
dbWriteTable(con, "pm102013_2015", df.pm1013, append = TRUE)
# Import pm10 data from excel files
df.pm1013 = read.csv2(file="soundings/PM10_2013_ymd.csv")
library(dplyr)
df.pm1013 = mutate(df.pm1013, datetime = levels(datetime), pmptp = signif(as.numeric(paste(pmptp)), digits = 4))
library(RMySQL)
con = dbConnect(drv= MySQL(), user= 'dbmeteodb', password='dbmeteodb', dbname ='dbmeteodb', host='localhost' )
dbWriteTable(con, "pm102013_2015", df.pm1013, append = TRUE, row.names = FALSE)
dbWriteTable(con, "pm102013_2015", df.pm1013, append = TRUE, overwrite = FALSE, row.names = FALSE)
dbWriteTable(con, "pm10", df.pm1013, append = TRUE, overwrite = FALSE, row.names = FALSE)
df.pm1015 = read.csv2(file="soundings/PM10_2015_ymd.csv")
View(df.pm1015)
df.pm10 = mutate(df.pm10, datetime = levels(datetime), pmptp = signif(as.numeric(paste(pmptp)), digits = 4))
df.pm10 = read.csv2(file="soundings/PM10_2015_ymd.csv")
df.pm10 = read.csv2(file="soundings/PM10_2015_ymd.csv")
View(df.pm10)
df.pm10 = mutate(df.pm10, datetime = levels(datetime), pmptp = signif(as.numeric(paste(pmptp)), digits = 4))
df.pm10 = read.csv2(file="soundings/PM10_2015_ymd.csv")
View(df.pm10)
View(df.pm1015)
View(df.pm10)
dbWriteTable(con, "pm10", df.pm10, append = TRUE, overwrite = FALSE, row.names = FALSE)
View(df.pm1015)
View(df.pm10)
View(df.pm1013)
View(df.pm1015)
View(df.pm1013)
str(df.pm10)
str(df.pm13)
str(df.pm1013)
df.pm10 = read.csv2(file="soundings/PM10_2015_ymd.csv")
df.pm10 = read.csv2(file="soundings/PM10_2015_ymd.csv")
View(df.pm10)
df.pm10 = read.csv2(file="soundings/PM10_2015_ymd.csv")
str(df.pm1013)
str(df.pm10)
library(dplyr)
df.pm10 = mutate(df.pm10, datetime = levels(datetime), pmptp = signif(as.numeric(paste(pmptp)), digits = 4))
str(df.pm10)
df.pm10 = read.csv2(file="soundings/PM10_2015_ymd.csv")
df.pm10 = mutate(df.pm10, datetime = paste0(levels(datetime),":00"), pmptp = signif(as.numeric(paste(pmptp)), digits = 4))
View(df.pm10)
dbWriteTable(con, "pm102013_2015", df.pm10, append = TRUE, overwrite = FALSE, row.names = FALSE)
substr("1234567890",3,4)
df.pm10 = read.csv2(file="soundings/PM10_2015_ymd.csv")
View(df.pm10)
df.pm10 = read.csv2(file="soundings/PM10_2015.csv")
View(df.pm10)
df.pm10 = mutate(df.pm10, datetime = paste0(levels(datetime),":00"), pmptp = signif(as.numeric(paste(pmptp)), digits = 4))
dbWriteTable(con, "pm102013_2015", df.pm10, append = TRUE, overwrite = FALSE, row.names = FALSE)
View(df.pm10)
View(df.pm10)
dbWriteTable(con, "pm102013_2015", df.pm10, append = TRUE, overwrite = FALSE, row.names = FALSE,
field.types=list(date="date", pmptp="double"))
dbWriteTable(con, "pm102013_2015", df.pm10, append = TRUE, overwrite = FALSE, row.names = FALSE,
field.types=list(date="date", pmptp="double(5,3"))
str(df.pm10)
signif(20.8, digits = 4k)
signif(20.8, digits = 4)
dbWriteTable(con, "pm102013_2015", df.pm10, append = TRUE, overwrite = FALSE, row.names = FALSE,
field.types=list(date="date", pmptp="decimal(3,0"))
dbWriteTable(con, "pm102013_2015", df.pm10, append = TRUE, overwrite = FALSE, row.names = FALSE,
field.types=list(date="date", pmptp="decimal(3,1"))
df.pm10 = read.csv2(file="soundings/PM10_2015.csv")
df.pm10 = mutate(df.pm10,
datetime = paste0(
levels(datetime),
":00"
),
pmptp = as.numeric(paste(pmptp))
)
df.pm10 = mutate(df.pm10, datetime = paste0(levels(datetime),":00"), pmptp = signif(as.numeric(paste(pmptp)), digits = 4))
dbWriteTable(con, "pm10", df.pm10, append = TRUE, overwrite = FALSE, row.names = FALSE)
df.pm10 = read.csv2(file="soundings/PM10_2015.csv")
df.pm10 = mutate(df.pm10,
datetime = paste0( "'",
levels(datetime),
":00",
"'"
),
pmptp = as.numeric(paste(pmptp))
)
View(df.pm10)
dbWriteTable(con, "pm10", df.pm10, append = TRUE, overwrite = FALSE, row.names = FALSE)
df.pm10 = read.csv2(file="soundings/PM10_2015.csv")
df.pm10 = mutate(df.pm10,
datetime = paste0(
levels(datetime),
":00"
),
pmptp = as.numeric(paste(pmptp))
)
dbWriteTable(con, "pm10", df.pm102013_2015, append = TRUE, overwrite = FALSE, row.names = FALSE)
dbWriteTable(con, "pm102013_2015", df.pm10, append = TRUE, overwrite = FALSE, row.names = FALSE)
dbWriteTable(con, "pm10", df.pm10, append = TRUE, overwrite = FALSE, row.names = FALSE)
paste(
"select sounding1.date, pressure , temp , mixr, relhumidity, snkt as windspeed , pm10 from",
"sounding1" ,",",
"(select date(datetime) as date , avg(pmptp) as pm10 from pm10 group by date) as pm10avg",
"where sounding1.date between", period$startDate, "and", period$endDate,
"and time = '12:00:00'",
"and sounding1.date = pm10avg.date order by date;"
)
